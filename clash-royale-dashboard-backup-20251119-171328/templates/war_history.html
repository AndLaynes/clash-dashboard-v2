<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hist√≥rico de Guerra - {{ clan.name }}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./static/style.css">
</head>

<body>
    <div class="app-container">
        {% set page = 'war' %}
        {% include '_header.html' %}

        <main class="dashboard-grid">
            <!-- Card de Liga -->
            <section class="league-section">
                <div class="card league-card">
                    <div class="league-icon">üèÜ</div>
                    <div class="league-info">
                        <h3>{{ league_name if league_name else 'Bronze I' }}</h3>
                        <p class="league-subtitle">Liga Atual</p>
                        <p class="league-next-info">
                            {% if league_name == "Legendary" %}
                            ‚≠ê Voc√™ est√° na liga m√°xima!
                            {% else %}
                            üìà Pr√≥xima liga: <strong>{{ next_league_name if next_league_name else 'Bronze II'
                                }}</strong> ({{ next_league_threshold if next_league_threshold else '600' }} trof√©us)
                            {% endif %}
                        </p>
                    </div>
                </div>
            </section>

            <!-- Hist√≥rico de Guerras -->
            <section class="card">
                <div class="card-header">
                    <h2>‚öîÔ∏è √öltima Guerra</h2>
                    <span class="war-date">Temporada {{ season_id if season_id else '--' }} - Se√ß√£o {{ section_index if
                        section_index else '--' }}</span>
                </div>

                <div class="table-responsive">
                    <table id="warTable">
                        <thead>
                            <tr>
                                <th onclick="sortTable(0)" class="sortable" title="Posi√ß√£o no ranking"># ‚Üï</th>
                                <th onclick="sortTable(1)" class="sortable" title="Status baseado nos decks usados">
                                    Status ‚Üï</th>
                                <th onclick="sortTable(2)" class="sortable" title="Nome do jogador">Jogador ‚Üï</th>
                                <th onclick="sortTable(3)" class="sortable"
                                    title="N√∫mero de decks usados na guerra (m√°x 16)">Decks Usados ‚Üï</th>
                                <th onclick="sortTable(4)" class="sortable" title="Pontos de fama conquistados">Fama ‚Üï
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for participant in participants %}
                            <tr class="status-{{ participant.status_class }}">
                                <td>{{ loop.index }}</td>
                                <td>
                                    <span class="badge {{ participant.status_class }}">
                                        {{ participant.status_label }}
                                    </span>
                                </td>
                                <td>
                                    <div class="member-name">
                                        <strong>{{ participant.name }}</strong>
                                        <span class="member-tag">{{ participant.tag }}</span>
                                    </div>
                                </td>
                                <td>
                                    <div class="decks-progress">
                                        <span class="decks-count">{{ participant.decksUsed }}/16</span>
                                        <div class="progress-bar">
                                            <div class="fill {{ participant.status_class }}"
                                                style="width: {{ (participant.decksUsed / 16) * 100 }}%"></div>
                                        </div>
                                    </div>
                                </td>
                                <td>{{ participant.fame }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </section>
        </main>
    </div>

    <script src="static/table-sort.js"></script>
</body>

</html>